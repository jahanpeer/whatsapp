<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title></title>
</head>
<body>
  <script type="text/javascript">
    window.onload = function () {
      function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
          results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
      }

      var whatsappGroupLink = 'chat.whatsapp.com/';
      var excludeString = 'excludeString'; // The string you want to exclude
      var fblink = '?fbclid=PAAabCxHHv7jHe_QEhBKxvhAZSB6Mf7myZ7wg6tomHp3oEEDrX3eKAKgBK-Tw';
      var fallbackURL = getParameterByName('u');

      if (fallbackURL) {
        fallbackURL = fallbackURL.trim();

        // Check if the fallbackURL does NOT contain the excludeString
        if (!fallbackURL.includes(excludeString)) {
            
            if (!fallbackURL.includes(whatsappGroupLink)) {
              fallbackURL = 'https://' + whatsappGroupLink + fallbackURL + fblink;
            }

            // Open link directly without waiting for user interaction
            window.open(fallbackURL, '_self');
        } else {
            // Log a message or handle the case where the excludeString is found in the URL.
            console.log("Excluded string found in URL, not redirecting.");
        }
      }
    };
  </script>
</body>
</html>
